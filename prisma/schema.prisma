// DATABASE CONNECTION
datasource db {
  provider = "mysql"
  url      = env("centerbeam.proxy.rlwy.net:14510")   // your Railway MySQL URLnpx
}

generator client {
  provider = "prisma-client-js"
}

// ✔ USERS (Customers + Admins)
model User {
  id            Int       @id @default(autoincrement())
  name          String
  email         String     @unique
  password      String
  role          String     @default("customer")  // "customer" | "admin"
  createdAt     DateTime   @default(now())
  orders        Order[]
}

// ✔ PRODUCTS (Gift Hampers)
model Product {
  id            Int        @id @default(autoincrement())
  name          String
  description   String?
  price         Float
  imageUrl      String?
  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt
  orders        OrderItem[]
}

// ✔ ORDERS
model Order {
  id            Int         @id @default(autoincrement())
  userId        Int
  totalAmount   Float
  status        String       @default("pending")  // pending, confirmed, delivered, cancelled
  createdAt     DateTime     @default(now())

  user          User         @relation(fields: [userId], references: [id])
  items         OrderItem[]
}

// ✔ ORDER ITEMS (multiple products inside one order)
model OrderItem {
  id         Int      @id @default(autoincrement())
  orderId    Int
  productId  Int
  quantity   Int      @default(1)

  order      Order    @relation(fields: [orderId], references: [id])
  product    Product  @relation(fields: [productId], references: [id])
}

// ✔ COUPONS
model Coupon {
  id          Int        @id @default(autoincrement())
  code        String     @unique
  discount    Float
  expiresAt   DateTime?
  createdAt   DateTime   @default(now())
}

// ✔ CONTACT FORM / CUSTOMER MESSAGE
model ContactMessage {
  id        Int      @id @default(autoincrement())
  name      String
  email     String
  phone     String?
  message   String
  createdAt DateTime @default(now())
}


